#:kivy 2.3.0
#:import SwapTransition kivy.uix.screenmanager.SwapTransition

MDFloatLayout:

    # ---- Build Side Navigation ----

    MDFloatLayout:
        id: nav_bar_layout
        md_bg_color: app.theme_cls.bg_darkest
        size_hint: (0.05, 1)
        pos_hint: {'center_x': 0.025, 'center_y': 0.5}

        MDIconButton:
            id: nav_button_home
            icon: 'home'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 1.0, 'center_y': 0.93}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_home')

        MDIconButton:
            id: nav_button_bemu
            icon: 'lightning-bolt'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.83}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_bemu')

        MDIconButton:
            id: nav_button_env
            icon: 'tailwind'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.73}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_env')

        MDIconButton:
            id: nav_button_ws
            icon: 'faucet'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.63}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_ws')

        MDIconButton:
            id: nav_button_ls
            icon: 'lightbulb-on'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.53}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_ls')

        MDIconButton:
            id: nav_button_theme
            icon: 'theme-light-dark'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.27}
            size_hint: (1.2, 0.0875)
            on_release: app.switchTheme()

        MDIconButton:
            id: nav_button_settings
            icon: 'tune-vertical'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.17}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_settings')

        MDIconButton:
            id: nav_button_power
            icon: 'power'
            theme_text_color: 'Custom'
            text_color: app.theme_cls.accent_dark
            md_bg_color: app.theme_cls.primary_light
            ripple_scale: 0
            pos_hint: {'center_x': 0.7, 'center_y': 0.07}
            size_hint: (1.2, 0.0875)
            on_release: app.navButtonRouter('nav_button_power')

    # ---- Build Main Layout Page Manager ----

    PageManager:
        id: page_manager
        transition: SwapTransition(duration = 0.25)

        # ---- App Home Screen ----

        AppHomeScreen:
            name: 'app_home_page'

            MDFloatLayout:
                id: app_home_page_layout
                size_hint: (0.95, 1)
                pos_hint: {'center_x': 0.525, 'center_y': 0.5}

                # ---- Build Weather Card ----

                MDCard:
                    id: weather_quick_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.4, 0.9)
                    pos_hint: {'center_x': 0.275, 'center_y': 0.5}

                # ---- Build Thermostat Card ----

                MDCard:
                    id: env_quick_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.4, 0.2)
                    pos_hint: {'center_x': 0.725, 'center_y': 0.85}
                    on_release: app.navButtonRouter('nav_button_env')

                # ---- Build BEMU Card ----

                MDCard:
                    id: bemu_quick_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.4, 0.2)
                    pos_hint: {'center_x': 0.725, 'center_y': 0.6}
                    on_release: app.navButtonRouter('nav_button_bemu')

                # ---- Build WS Card ----

                MDCard:
                    id: ws_quick_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.4, 0.2)
                    pos_hint: {'center_x': 0.725, 'center_y': 0.35}
                    #on_release: app.navButtonRouter('nav_button_ws')

                    MDFloatLayout:

                        MDIcon:
                            id: fresh_water_icon_75
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_light
                            pos_hint: {'center_x': 0.2,'center_y': 0.8}
                        
                        MDIcon:
                            id: fresh_water_icon_50
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_light
                            pos_hint: {'center_x': 0.2,'center_y': 0.6}
                        
                        MDIcon:
                            id: fresh_water_icon_25
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_light
                            pos_hint: {'center_x': 0.2,'center_y': 0.4}
                        
                        MDIcon:
                            id: fresh_water_icon_0
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.primary_light
                            pos_hint: {'center_x': 0.2,'center_y': 0.2}

                        MDLabel:
                            id: fresh_water_label
                            text: 'Fresh\nWater'
                            halign: 'right'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_dark
                            font_size: 24
                            bold: True
                            pos_hint: {'center_x': -0.35,'center_y': 0.5}

                        MDIcon:
                            id: fresh_to_pump_line
                            icon: 'minus'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_dark
                            pos_hint: {'center_x': 0.3,'center_y': 0.5}

                        WSPumpToggleButton:
                            id: ws_pump_switch
                            text: 'Pump'
                            md_bg_color: app.theme_cls.accent_light
                            ripple_scale: 0
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_dark
                            pos_hint: {'center_x': 0.5, 'center_y': 0.72}
                            on_release: self.state = 'down' if self.state == 'normal' else 'normal'
                        
                        WSHeaterToggleButton:
                            id: ws_heater_switch
                            text: 'Heater'
                            md_bg_color: app.theme_cls.accent_light
                            ripple_scale: 0
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_dark
                            pos_hint: {'center_x': 0.5, 'center_y': 0.28}
                            on_release: self.state = 'down' if self.state == 'normal' else 'normal'

                        MDIcon:
                            id: pump_to_grey_line
                            icon: 'minus'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_dark
                            pos_hint: {'center_x': 0.7,'center_y': 0.5}

                        MDIcon:
                            id: grey_water_icon_75
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_light
                            pos_hint: {'center_x': 0.8,'center_y': 0.8}
                        
                        MDIcon:
                            id: grey_water_icon_50
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_light
                            pos_hint: {'center_x': 0.8,'center_y': 0.6}
                        
                        MDIcon:
                            id: grey_water_icon_25
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_light
                            pos_hint: {'center_x': 0.8,'center_y': 0.4}
                        
                        MDIcon:
                            id: grey_water_icon_0
                            icon: 'square-rounded-outline'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_light
                            pos_hint: {'center_x': 0.8,'center_y': 0.2}

                        MDLabel:
                            id: grey_water_label
                            text: 'Grey\nWater'
                            theme_text_color: 'Custom'
                            text_color: app.theme_cls.accent_dark
                            font_size: 24
                            bold: True
                            pos_hint: {'center_x': 1.36,'center_y': 0.5}

                # ---- Build LS Card ----

                MDCard:
                    id: ls_quick_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.4, 0.15)
                    pos_hint: {'center_x': 0.725, 'center_y': 0.125}
                    on_release: app.navButtonRouter('nav_button_ls')

        BEMUHomeScreen:
            name: 'bemu_home_page'

            MDFloatLayout:
                id: bemu_home_page_layout
                size_hint: (0.95, 1)
                pos_hint: {'center_x': 0.525, 'center_y': 0.5}

                # ---- Build Main Card ----

                MDCard:
                    id: bemu_home_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.85, 0.9)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        EnvHomeScreen:
            name: 'env_home_page'

            MDFloatLayout:
                id: env_home_page_layout
                size_hint: (0.95, 1)
                pos_hint: {'center_x': 0.525, 'center_y': 0.5}

                # ---- Build Main Card ----

                MDCard:
                    id: env_home_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.85, 0.9)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        WSHomeScreen:
            name: 'ws_home_page'

            MDFloatLayout:
                id: ws_home_page_layout
                size_hint: (0.95, 1)
                pos_hint: {'center_x': 0.525, 'center_y': 0.5}

                # ---- Build Main Card ----

                MDCard:
                    id: ws_home_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.85, 0.9)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        LSHomeScreen:
            name: 'ls_home_page'

            MDFloatLayout:
                id: ls_home_page_layout
                size_hint: (0.95, 1)
                pos_hint: {'center_x': 0.525, 'center_y': 0.5}

                # ---- Build Main Card ----

                MDCard:
                    id: ls_home_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.85, 0.9)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}


        
        SettingsHomeScreen:
            name: 'settings_home_page'

            MDFloatLayout:
                id: settings_home_page_layout
                size_hint: (0.95, 1)
                pos_hint: {'center_x': 0.525, 'center_y': 0.5}

                # ---- Build Main Card ----

                MDCard:
                    id: settings_home_card
                    md_bg_color: app.theme_cls.bg_darkest
                    size_hint: (0.85, 0.9)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}